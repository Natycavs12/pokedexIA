<!DOCTYPE html>
<html>
<head>
    <title>PokéApp</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px; }
        #result { margin-top: 20px; padding: 10px; border: 1px solid #ddd; }
        #preview { max-width: 100%; margin-top: 10px; }
        .background-image {
        background-image: url("{{ url_for('static', filename='images/whos-that-pokemon.webp') }}");
        background-size: cover; /* Asegura que la imagen cubra todo el viewport */
        background-position: center; /* Centra la imagen */
        background-repeat: no-repeat; /* Evita que la imagen se repita */
        width: 100vw; /* Asegura que el ancho sea del 100% del viewport */
        /*height: 100vh; /* Asegura que la altura sea del 100% del viewport */
        margin: 0; /* Elimina márgenes */
        padding: 0; /* Elimina padding */   
    }
    .title_image {
        background-image: url("{{ url_for('static', filename='images/pokedex_logo.webp') }}");
        text-align: center;
        font-size: 2em;
        color: white; /* Cambia el color del texto a blanco */
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7); /* Añade sombra al texto para mejorar la legibilidad */
        margin-top: 20px; /* Añade un margen superior para separar del borde superior */
    }
    </style>
</head>
<body class="background-image" >
<!-- background="{{url_for('static', filename='images/whos-that-pokemon.webp')}}" width="100%" height="100%"> -->
    <!-- <img src="{{ url_for('static', filename='images/whos-that-pokemon.webp') }}" alt="Pokedex" width="600" height=""
    class="d-inline-block align-text-top"> -->

    <!-- <h1>¿Quién es ese Pokémon?</h1> -->
    <!-- <h1 >POKEDEX</h1> -->
    <div >
        <img src="{{ url_for('static', filename='images/pokedex_logo.webp') }}" alt="Pokedex" width="200" height=""
        class="d-inline-block align-text-top">
    </div>
    <form id="upload-form">
        <input type="file" id="file-input" accept="image/*" required>
        <button type="submit">Identify Pokémon</button>
    </form>
    
    <div id="preview-container">
        <img src="{{ url_for('static', filename='images/pokedex_sinfondo.png') }}" alt="Pokedex" width="600" height=""
        class="d-inline-block align-text-top">

        <!-- <img src="/src/fondo_cualesesepokemon.jpeg" alt="asda">
        <img src="/src/pokedex.jpg" alt="Pokedex" style="max-width: 200px; margin-top: 10px;"> -->
        <img id="preview" style="display: none;
        max-width: 200px;">
    </div>
    
    <div id="result" style="display: none;">
        <h2>Result:</h2>
        <p>This is <strong id="pokemon-name"></strong>! (Confidence: <span id="confidence"></span>%)</p>
    </div>
    
    <script>
        const form = document.getElementById('upload-form');
        const fileInput = document.getElementById('file-input');
        const preview = document.getElementById('preview');
        const resultDiv = document.getElementById('result');
        const pokemonName = document.getElementById('pokemon-name');
        const confidence = document.getElementById('confidence');
        
        fileInput.addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (file) {
                preview.src = URL.createObjectURL(file);
                preview.style.display = 'block';
                resultDiv.style.display = 'none';
            }
        });
        
        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            const file = fileInput.files[0];
            
            if (!file) return;
            
            const formData = new FormData();
            formData.append('file', file);
            
            try {
                const response = await fetch('/predict', {
                    method: 'POST',
                    body: formData
                });
                
                const data = await response.json();
                
                if (data.error) {
                    alert(data.error);
                    return;
                }
                
                pokemonName.textContent = data.pokemon;
                confidence.textContent = (data.confidence * 100).toFixed(2);
                resultDiv.style.display = 'block';
                
            } catch (error) {
                console.error('Error:', error);
                alert('An error occurred. Please try again.');
            }
        });
    </script>
</body>
</html>